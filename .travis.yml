language: ruby
sudo: true
env:
  global:
    - rvmsudo_secure_path: 0
    - GH_REF: github.com/${TRAVIS_REPO_SLUG}.git
    - secure: "kzZNUDXaB9dO/at6ZPbXD9J0CQSb6WkQicO0fvG5VyBAKtLf1h3cmn7DxXfkUn11ZN5jt81P3oQUfSXrD5WddNlf2cu+14cS821POvU69vFizyHLgDpCzvEwWg6UJKMEzuO7lEZqbZl4qaxN8kWlC3jDlSvO6NY+Cn3i6kLO8vS8/n0u4B+wJP/y7sW3OVin4rQsx/+KBU/YwI3hqs0v43D98LH+hHWFw+mIqOcjCX2jKZChPI7DaqRv2A2Y+/VCeBBZRoo1YmxtLtp+23+m6SSZT/PS2DXexBmAIQM63DCkHFgr5g2vWNWqI2e1LMWixkrgBAnIy+mLsadXnpSHh5gh5QWEAa+FbS1DB3xGsLU5aDkb0o1SYVuMo1WpljPJxknmxmANFy1HdHqhmVTHg2W7ioBEtyFdQx39TKq4tOrEu36Xy7JIJhpisYp3ZeDCL9pNlYYUdPLDT0EhVC1a+IQb4AXnGbTOFHgrKVDsJ+n0EIDSFP7OrzMcr8xfzerXiomFFmiCLpEGGKUgD3rCJW1GuB0js/vQi8USc+PERjfz79dkZvjOGreHDLrPABLnOolZpdmtxvV3RMinqq0OaXFpNhZUw00yBEkGtJ0DI0y+I29Zej0hZXZK3pvHEELByNkzmyQFDLBcgNSXrKI5mpmnO5iaQmf3YcS32eTcnJU="
rvm:
  - 1.9.3
  - 2.0
before_install:
  - gem install fpm-cookery
  - gem install executable-hooks
  - wget https://github.com/github/git-lfs/releases/download/v0.6.0/git-lfs-linux-amd64-0.6.0.tar.gz
  - tar xvzf git-lfs-linux-amd64-0.6.0.tar.gz
  - cd git-lfs-0.6.0 && sudo ./install.sh && cd ../
script:
  - travis_wait 90 ./.travis.build
before_deploy:
  - export RELEASE_PKG_FILE=$(ls ./pkg/*.deb)
  - echo "deploying $RELEASE_PKG_FILE to GitHub releases"
deploy:
  provider: releases
  api_key: "dIJufv7k6urVR0VG+iWxkVOKFQlxidIphw0wUcDWFEZaiV/5azEQ3TFomdrbM+3sg0mda+mpD+nKQ4rei1t6nx4zHd1uOChrm1rXiw6jkgqgJCg7NbIVJ53LuuptwVxX8useHPb13ocQPZELCdxGcWnj08Tc4a24CHUkPyod1M9KseFtNQZjgQ0DtfB446aW5AYoqwl8Oje5I+8ZY2zXeuFLPM1kyKCzHp3oM6Pj0cTjjQCmK0BxyWXEuXqFYwpNB7soj4sjCMN3BsOFaGHzzsVXDsssl0SR0btCrwFYBZG6AU9Fe1fzqLAezLWeL4+33Ztp3lACkgkHBpFAOXAGHPG0MIDbO5iTJYD7L5DpdQprh9li5um6i3Zg3gWDFgPqL7W7hqJ8VlDy/GM3BYTG40eDUa/ikVZvabEiyv+h2r9ufhhVxlrrLf5aFD/uNM2oz4nWQvHWx/I8HCXI0CVzlJWIC7Kwfw9ay0g6+zbWgfUIzPlLM73JZu35W6uSvQ8Gr6ozhHQ4stm7Nx8YUdkleGo9Exwn2B7XFpWFmw+pmQljWV/vRlkXdqWa0JY9jeNYZE557WplN6l4b3B8xuuhrT6qh5Ll81IFldBGhIo/5mXrgJHT244ymEbxywkjRkrSSbA7TDfQzaAOBwrugBUp9A+6KX1B7xO75Xdd1fi23/o="
  file: "${RELEASE_PKG_FILE}"
  skip_cleanup: true
  on:
    tags: true
